(function($){var All=function(){this.a=function($this,t,fn,obj){$this.each(function(i){t=t.split("*").join("$(this)");t+=";";eval(t)})}};$.fn.all=function(e,t,n){var r=$(this);$.fn.all.o=$.fn.all.o?$.fn.all.o:new All;$.fn.all.o.a(r,e,t,n);return r}})(jQuery);(function(e){var t=function(t){var n=window.console,r,i,s=e.extend({verbosity:0},t);r=s["verbosity"];this.a=function(e,t){if(t>=0)i=t;r>i&&n&&n.log(e)}};e.log=function(n,r,i){e.log.o=e.log.o?e.log.o:new t(i);e.log.o.a(n,r)}})(jQuery);(function(e){var t=function(){var t,n,r=0;this.a=function(i,s,o){if(!s)return t;if(s.indexOf("/")!=-1){var u=e.get(s,function(r){if(!r||u.getResponseHeader("Content-Type").indexOf("text/html")==-1){location=s;return false}var i=String(r).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta)\>/gi,"</div>");i=e.trim(i);n=e(e.parseHTML?e.parseHTML(i,document,true):i);var a=String(i).replace(/<(script|link)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(script|link)\>/gi,"</div>");a=e.trim(a);t=e(e.parseHTML?e.parseHTML(a):a);o&&o();return true});return true}if(s=="-"){if(r){var a=function(e){return n.find("#"+e.attr("id"))};i.all("var $div = fn(*); *.html($div.html())",a)}r++;var f=function(e){t.find("#"+e.attr("id")).remove()};i.all("fn(*)",f);return i}return t.find(".document-"+s)}};e.fn.getPage=function(n,r){var i=e(this);e.fn.getPage.o=e.fn.getPage.o?e.fn.getPage.o:new t;return e.fn.getPage.o.a(i,n,r)}})(jQuery);(function(e){var t=function(t){var n=function(t,n){if(n=="href"){e("head").append('<link rel="stylesheet" type="text/css" '+n+'="'+t+'" />')}else{e("head").append('<script type="text/javascript" '+n+'="'+t+'" />')}e.log(n+" + : "+t)},r=function(t,n){if(n=="href")e("link["+n+"*='"+t+"']").remove();else e("script["+n+"*='"+t+"']").remove();e.log(n+" - : "+t)},i=function(e,t){if(!e)return false;for(var n=0;n<t.length;n++){if(t[n][0]==e){t[n][1]=1;return true}}return false};this.a=function(t,s,o,u){switch(s){case"f":return i(t,u);case"i":return n(t,o);case"r":return r(t,o);default:e.log("Bad operator in Script")}}};e.addScript=function(n,r,i,s){e.addScript.o=e.addScript.o?e.addScript.o:new t;if(n)return e.addScript.o.a(n,r,i,s)}})(jQuery);(function(e){var t=function(t){var n=[],r,i=0,s=e.extend({deltas:true},t);this.a=function(t,r){e.log("Entering Scripts a()");if(!s["deltas"]){t.each(function(){e.addScript(e(this)[0],"i",r)});return}$scriptsN=[];t.each(function(){$scriptsN.push([e(this).attr(r),0]);if(!i)n.push([e(this).attr(r),0])});i++;for(var o=0;o<n.length;o++){n[o][1]=2;if(e.addScript(n[o][0],"f",r,$scriptsN))n[o][1]=1}for(var o=0;o<n.length;o++){if(n[o][1]==2){if(n[o][0])e.addScript(n[o][0],"r",r);n.splice(o,1)}}for(var o=0;o<$scriptsN.length;o++){if($scriptsN[o][1]==0)e.addScript($scriptsN[o][0],"i",r)}n=$scriptsN.slice()};e.addScript(null,null,null,s)};e.fn.addScripts=function(n,r){$this=e(this);if(n=="href"){e.fn.addScripts.h=$this.length?e.fn.addScripts.h:new t(r);if($this.length)e.fn.addScripts.h.a($this,n)}else{e.fn.addScripts.s=$this.length?e.fn.addScripts.s:new t(r);if($this.length)e.fn.addScripts.s.a($this,n)}return $this}})(jQuery);(function($){var Scripts=function(options){var delta,$script,$scripts={},$scriptsO={},pass=0,settings=$.extend({deltas:true},options),det=function(){$.log("Entering det");var e=$().getPage("link"),t=$().getPage("script");$scripts.c=e.filter(function(){return $(this).attr("rel").indexOf("stylesheet")!=-1});$scripts.s=t.filter(function(){return $(this).attr("src")});$scripts.t=t.filter(function(){return!$(this).attr("src")})},addtxts=function(){$.log("Entering addtxts");$scripts.t.each(function(){var txt=$(this).html();if(txt.indexOf(").ajaxify(")==-1){$.log("inline script : "+txt);eval(txt)}return true})},add=function(){$.log("Entering scripts.add()");$scripts.c.addScripts("href");$scripts.s.addScripts("src");addtxts()};this.a=function(){det();if(pass++)add();else{$scripts.c.addScripts("href");$scripts.s.addScripts("src")}$scriptsO.t=null};delta=settings["deltas"];$().addScripts("href",settings);$().addScripts("src",settings)};$.scripts=function(e){$.scripts.o=$.scripts.o?$.scripts.o:new Scripts(e);$.scripts.o.a()}})(jQuery);(function(e){var t=function(t,n){var r=e.extend({selector:"a:not(.no-ajaxy)",requestKey:"pronto",requestDelay:0,verbosity:0,deltas:true,cb:null},n),i=function(){e.log("Entering ajaxify...",1,r)},s=function(){e.scripts(r);if(r["cb"])r["cb"]()},o=function(){e.log("Statechange: ");var t=location.href;e.log(t);s()};firstRun=function(){t.getPage("-");s()};e(function(){i();t.pronto(r);e(window).on("pronto.render",o);e().getPage(location.href,firstRun)})};e.fn.ajaxify=function(n){$this=e(this);var r=function(){new t($this,n)};e.getScript("http://4nf.org/js/pronto.js",r);return $this}})(jQuery)
