(function(e){var t=function(t){var n=[];var r=window.console;var i=e.extend({verbosity:0},t);var s=i["verbosity"];this.a=function(e){r&&r.log(e)}};e.log=function(n,r){var i;if(!e.log.o)e.log.o=new t(r);i=e.log.o.a(n);return i}})(jQuery);(function(e){var t=function(){this.a=function(t){if(!t)return d;if(typeof t=="string")return d=e.pages(e.memory(t));if(typeof t=="object")d=t;}};e.cache=function(n){var r;if(!e.cache.o)e.cache.o=new t;r=e.cache.o.a(n);return r}})(jQuery);(function(e){var t=function(t){var n=e.extend({memoryoff:false},t);var i=n["memoryoff"];this.a=function(e){d=i;if(!e||d==true)return false;if(d==false)return e;if(d.iO(", ")){d=d.split(", ");r=e;for(var t=0;t<d.length;t++)if(e==d[t])return false}return e==d?false:e}};e.memory=function(n,r){var i;if(!e.memory.o)e.memory.o=new t(r);i=e.memory.o.a(n);return i}})(jQuery);(function(e){var t=function(){this.a=function(e){if(typeof e==="string"){for(var t=0;t<d.length;t++)if(d[t][0]==e)return d[t][1]}if(typeof e==="object"){d.push(e)}}};e.pages=function(n){var r;if(!e.pages.o)e.pages.o=new t;r=e.pages.o.a(n);return r}})(jQuery);var _lSel=function(e,t){pass++;_lDivs(t);$.scripts(e);$.scripts("a");return $.scripts("c")};var _lPage=function(e,t,n,r){if(e.iO("#"))e=e.split("#")[0];if(!$.cache(e))return _lAjax(e,t,n,r);t&&t()};var _lDivs=function(e){if($.cache())_all(e,"fn(*)",function(e){e.html($.cache().find("#"+e.attr("id")).html())})};var _all=function($t,t,fn){$t.each(function(){t=t.split("*").join("$(this)");t+=";";eval(t)})};var _lAjax=function(e,t,n,r){var i=$.ajax({url:e,type:n?"POST":"GET",data:n?n.data:null,success:function(n){if(!n||!_isHtml(i)){if(!r)location=e}$.cache($(_parseHTML(n)));$.pages([e,$.cache()]);t&&t()}})};var _isHtml=function(e){return d=e.getResponseHeader("Content-Type"),d&&(d.iO("text/html")||d.iO("text/xml"))};var _parseHTML=function(e){return $.trim(_replD(e))};var _replD=function(e){return String(e).replace(docType,"").replace(tagso,div12).replace(tagsc,"</div>")};(function($){var GetPage=function(){this.a=function(e,t,n){if(!e)return $.cache();if(e.iO("/"))return _lPage(e,t,n);if(e=="+")return _lPage(t,n,false,true);if(e=="-")return _lSel(t,n);return $.cache().find(".ajy-"+e)};var _lSel=function(e,t){pass++;_lDivs(t);$.scripts(e);$.scripts("a");return $.scripts("c")};var _lPage=function(e,t,n,r){if(e.iO("#"))e=e.split("#")[0];if(!$.cache(e))return _lAjax(e,t,n,r);t&&t()};var _lDivs=function(e){if($.cache())_all(e,"fn(*)",function(e){e.html($.cache().find("#"+e.attr("id")).html())})};var _all=function($t,t,fn){$t.each(function(){t=t.split("*").join("$(this)");t+=";";eval(t)})};var _lAjax=function(e,t,n,r){var i=$.ajax({url:e,type:n?"POST":"GET",data:n?n.data:null,success:function(n){if(!n||!_isHtml(i)){if(!r)location=e}$.cache($(_parseHTML(n)));$.pages([e,$.cache()]);t&&t()}})};var _isHtml=function(e){return d=e.getResponseHeader("Content-Type"),d&&(d.iO("text/html")||d.iO("text/xml"))};var _parseHTML=function(e){return $.trim(_replD(e))};var _replD=function(e){return String(e).replace(docType,"").replace(tagso,div12).replace(tagsc,"</div>")}};$.getPage=function(e,t,n){var r;if(!$.getPage.o)$.getPage.o=new GetPage;r=$.getPage.o.a(e,t,n);return r}})(jQuery);var _init=function(e){if(!api||!e.pluginon)return false;_outjs(e);$().allScripts("",e);$.scripts("i",e);$.memory(0,e);return true};var _outjs=function(e){if(e.outjs)$.log(jsout)};(function(e){var t=function(t){var n=e.extend({cb:0,pluginon:true,fn:e.getPage},t);var r=n["cb"],i=n["pluginon"],s=n["fn"];this.a=function(t){e(function(){e.log("Entering ajaxify...",n);if(o(n)){t.pronto(n);e.getPage(location.href,e.scripts)}})};var o=function(t){if(!api||!t.pluginon)return false;u(t);e().allScripts("",t);e.scripts("i",t);e.memory(0,t);return true};var u=function(t){if(t.outjs)e.log(jsout)}};e.fn.ajaxify=function(n){var r;var i=e(this);if(!e.fn.ajaxify.o)e.fn.ajaxify.o=new t(n);r=e.fn.ajaxify.o.a(i);return i}})(jQuery);var _alltxts=function(e){e.each(function(){d=$(this).html();if(!d.iO(").ajaxify(")&&(inline||$(this).hasClass("ajaxy")||_inline(d,s)))_addtext(d);r=true})};var _addtext=function(e){try{$.globalEval(e)}catch(t){alert(t)}};var _inline=function(e,t){var n=inlinehints;if(n){n=n.split(", ");for(var r=0;r<n.length;r++)if(e.iO(n[r]))return true}};var _addScripts=function(e,t,n){t.c.addHrefs(e,n);t.s.addSrcs(e,n)};(function(e){var t=function(t){var n=e();var i=e.extend({canonical:true,inline:true,inlinehints:false},t);var o=i["canonical"],u=i["inline"],a=i["inlinehints"];this.a=function(t){if(t=="i")return true;if(t=="a")return f(n.t);if(t=="c"&&n.can)return n.can.attr("href");if(!t)e.detScripts(n);h(t,n,i);};var f=function(t){t.each(function(){d=e(this).html();if(!d.iO(").ajaxify(")&&(u||e(this).hasClass("ajaxy")||c(d,s)))l(d);r=true})};var l=function(t){try{e.globalEval(t)}catch(n){alert(n)}};var c=function(e,t){var n=a;if(n){n=n.split(", ");for(var r=0;r<n.length;r++)if(e.iO(n[r]))return true}};var h=function(e,t,n){t.c.addHrefs(e,n);t.s.addSrcs(e,n)}};e.scripts=function(n,r){var i;if(!e.scripts.o)e.scripts.o=new t(r);i=e.scripts.o.a(n);return i}})(jQuery);var _rel=function(e,t){return $(e).filter(function(){return $(this).attr("rel").iO(t)})};(function(e){var t=function(){var t,n,r,i;this.a=function(o){t=e.getPage("head");n=e.getPage("body");r=t.find(".ajy-link");i=e.getPage("script");o.c=s(r,"stylesheet");o.can=s(r,"canonical");o.s=i.filter(function(){return e(this).attr("src")});o.t=i.filter(function(){return!e(this).attr("src")})};var s=function(t,n){return e(t).filter(function(){return e(this).attr("rel").iO(n)})}};e.detScripts=function(n){var r;if(!e.detScripts.o)e.detScripts.o=new t;r=e.detScripts.o.a(n);return r}})(jQuery);(function(e){var t=function(){var e=[],t=[];this.a=function(n,r){if(n.allScripts("href"))return true;if(pass)_classAlways(n,"href");if(r)return _sameScripts(t,"href");t=[];_newArray(n,t,e,"href");if(pass){_findCommon(e,t);_freeOld(e,"href");_sameScripts(t,"href");e=t.slice()}}};e.fn.addHrefs=function(n){var r;var i=e(this);if(!e.fn.addHrefs.o)e.fn.addHrefs.o=new t;r=e.fn.addHrefs.o.a(i,n);return r}})(jQuery);(function(e){var t=function(){var e=[],t=[];this.a=function(n,r){if(n.allScripts("src"))return true;if(pass)_classAlways(n,"src");if(r)return _sameScripts(t,"src");t=[];_newArray(n,t,e,"src");if(pass){_findCommon(e,t);_freeOld(e,"src");_sameScripts(t,"src");e=t.slice()}}};e.fn.addSrcs=function(n){var r;var i=e(this);if(!e.fn.addSrcs.o)e.fn.addSrcs.o=new t;r=e.fn.addSrcs.o.a(i,n);return r}})(jQuery);(function(e){var t=function(t){var n=e.extend({deltas:true},t);var r=n["deltas"];this.a=function(t,n){if(r)return false;t.each(function(){_iScript(e(this)[0],n)});return true;}};e.fn.allScripts=function(n,r){var i;var s=e(this);if(!e.fn.allScripts.o)e.fn.allScripts.o=new t(r);i=e.fn.allScripts.o.a(s,n);return i}})(jQuery);var _classAlways=function(e,t){e.each(function(){if($(this).attr("data-class")=="always"){_iScript($(this).attr(t),t);$(this).remove()}})};var _sameScripts=function(e,t){for(var n=0;n<e.length;n++)if(e[n][1]==0)_iScript(e[n][0],t)};var _iScript=function(e,t){$("head").append((t=="href"?linki:scri).replace("*",e))};var _newArray=function(e,t,n,r){e.each(function(){d=[$(this).attr(r),0];t.push(d);if(!pass)n.push(d)})};var _findCommon=function(e,t){for(var n=0;n<e.length;n++){e[n][1]=2;if(_findScript(e[n][0],t))e[n][1]=1}};var _findScript=function(e,t){if(e)for(var n=0;n<t.length;n++)if(t[n][0]==e){t[n][1]=1;return true}};var _freeOld=function(e,t){for(var n=0;n<e.length;n++)if(e[n][1]==2&&e[n][0])_removeScript(e[n][0],t)};var _removeScript=function(e,t){$((t=="href"?linkr:scrr).replace("!",e)).remove()};String.prototype.iO=function(e){return this.toString().indexOf(e)+1};(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery);var l=0,pass=0,api=window.history&&window.history.pushState&&window.history.replaceState;var docType=/<\!DOCTYPE[^>]*>/i;var tagso=/<(html|head|body|title|meta|script|link)([\s\>])/gi;var tagsc=/<\/(html|head|body|title|meta|script|link)\>/gi;var div12='<div class="ajy-$1"$2';var linki='<link rel="stylesheet" type="text/css" href="*" />',scri='<script type="text/javascript" src="*" />';var linkr='link[href*="!"]',scrr='script[src*="!"]';if(jQuery)(function(e){function u(t){e.extend(o,t||{});o.$body=e("body");r=window.location.href;w();n.on("popstate",m);if(o.turbo)e(o.selector).hoverIntent(f,l);o.$body.on("click.pronto",o.selector,d);p()}function a(n){var r=false;t.each(function(){try{if(e(n).parents("#"+e(this).attr("id")).length>0)r=true}catch(t){alert(t)}});return r}function f(t){s=null;var n=t.currentTarget;if(window.location.protocol!==n.protocol||window.location.host!==n.host)return;if(r==n.href)return;var i=function(){if(o.previewoff===true)return;if(!a(n)&&(o.previewoff===false||!e(n).closest(o.previewoff).length))d(t,true)};o.fn("+",n.href,i)}function l(){}function c(e,t){if(e.indexOf("?")>0){e=e.substring(0,e.indexOf("?"))}return e+"?"+t}function h(t){var n=t.serialize();var r;r=e("input[name][type=submit]",t);if(r.length==0){e.log("Nothing found in function k() !");return n}var i=r.attr("name")+"="+r.val();if(n.length>0){n+="&"+i}else{n=i}return n}function p(t){if(!o.forms)return;e("form").submit(function(t){var i=e(t.target);if(!i.is("form")){i=i.filter("input[type=submit]").parents("form:first");if(i.length==0){return true}}var o=h(i);var t="get",u=i.attr("method");if(u.length>0&&u.toLowerCase()=="post")t="post";var a,f=i.attr("action");if(f!=null&&f.length>0)a=f;else a=r;if(t=="get")a=c(a,o);else{s={};s.data=o}e.log("Form : "+a);n.trigger("pronto.submit",a);v(a);return false})}function d(e,t){var n=e.currentTarget;s=null;if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||window.location.protocol!==n.protocol||window.location.host!==n.host){return}if(n.hash&&n.href.replace(n.hash,"")===window.location.href.replace(location.hash,"")||n.href===window.location.href+"#"){w();return}e.preventDefault();e.stopPropagation();if(r==n.href){w()}else{v(n.href,t)}}function v(e,t){n.trigger("pronto.request");var r=function(){g(e,0,true,t)};o.fn(e,r,s)}function m(e){var t=e.originalEvent.state;if(t!==null&&t.url!==r){n.trigger("pronto.request");var i=function(){g(t.url,t.scroll,false)};o.fn(t.url,i)}}function g(e,t,n,r){if(i!==null){clearTimeout(i);i=null}i=setTimeout(function(){b(e,t,n,r)},o.requestDelay)}function y(e,t){r=e;if(t){history.pushState(o.scrollTop?{url:r,scroll:0}:{url:r},"state-"+r,r)}else{w()}}function b(r,i,u,a){var f;n.trigger("pronto.load");E(r);w();e("title").html(o.fn("title").html());f=o.fn("-",s,t);if(f&&f!=r)r=f;p();if(r.indexOf("#")+1&&!a){e("html, body").animate({scrollTop:e("#"+r.split("#")[1]).offset().top},500)}y(r,u);n.trigger("pronto.render");if(o.scrollTop)n.scrollTop(i)}function w(){if(o.scrollTop){history.replaceState({url:r,scroll:n.scrollTop()},"state-"+r,r)}else{history.replaceState({url:r},"state-"+r,r)}}function E(e){if(typeof window.ga!=="undefined")window.ga("send","pageview",e)}var t,n=e(window),r="",i=null,s=null;var o={selector:"a:not(.no-ajaxy)",requestKey:"pronto",requestDelay:0,forms:true,turbo:true,previewoff:true,fn:false,scrollTop:false};e.fn.pronto=function(n){t=e(this);u(n);return t}})(jQuery)
